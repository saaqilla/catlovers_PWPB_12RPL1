<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pendaftaran - BlushFit Pilates</title>

  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <style>
    *{box-sizing:border-box;margin:0;padding:0;font-family:'Segoe UI',sans-serif}
    body{background:#fffafc;color:#333}
    header{background:#f2e2d5;color:#4a3a3a;padding:18px 16px;text-align:center;position:sticky;top:0;z-index:10}
    nav a{margin:0 12px;color:#4a3a3a;text-decoration:none;font-weight:600}
    main{padding:28px 18px;max-width:820px;margin:auto}
    form{background:#fff;border-radius:12px;padding:20px;box-shadow:0 10px 30px rgba(0,0,0,.06)}
    .field{margin-bottom:14px}
    label{display:block;margin-bottom:6px;font-weight:600}
    input[type="text"],input[type="email"],input[type="tel"],select,textarea,input[type="date"],input[type="time"]{
      width:100%;padding:10px;border:1px solid #4a3a3a;border-radius:8px;font-size:1rem
    }
    textarea{min-height:100px;resize:vertical}
    .row{display:flex;gap:12px}
    .row .field{flex:1}
    .submit{background:#f2e2d5;color:#4a3a3a;padding:10px 16px;border-radius:10px;border:none;font-weight:700;cursor:pointer}
    .submit:disabled{opacity:.6;cursor:not-allowed}
    .hint{font-size:.95rem;color:#666;margin-top:8px}
    .success{background:#e6ffef;border-left:6px solid #2fb36f;padding:12px;border-radius:8px;margin-top:12px}
    footer{background:#f2e2d5;color:#4a3a3a;text-align:center;padding:14px;margin-top:22px}

    /* Harga Paket */
    .pricing{display:grid;gap:16px;margin-bottom:28px;grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}
    .price-card{
      background:#fff;
      border-radius:12px;
      padding:16px;
      box-shadow:0 8px 20px rgba(0,0,0,0.05);
      text-align:center;
    }
    .price-card h3{margin-bottom:8px;color:#efc991}
    .price-card p{font-size:1.1rem;margin-bottom:0;font-weight:600}

    @media(max-width:700px){ .row{flex-direction:column} }
  </style>
</head>
<body>
  <header data-aos="fade-down">
    <h1>BlushFit Pilates</h1>
    <nav>
      <a href="beranda.html">Beranda</a>
      <a href="tentang.html">Tentang</a>
      <a href="jadwal.html">Jadwal</a>
      <a href="pendaftaran.html">Pendaftaran</a>
    </nav>
  </header>

  <main>
    <h2 data-aos="fade-up">Paket & Harga</h2>
    <div class="pricing" data-aos="fade-up" data-aos-delay="100">
      <div class="price-card">
        <h3>Kelas Pagi</h3>
        <p>Rp300.000 / bulan</p>
      </div>
      <div class="price-card">
       <h3>Kelas Malam</h3>
       <p>Rp320.000 / bulan</p>
      </div>
      <div class="price-card">
        <h3>Kelas Online</h3>
        <p>Rp250.000 / bulan</p>
      </div>
      <div class="price-card">
        <h3>Instruktur Profesional</h3>
        <p>Rp500.000 / bulan</p>
      </div>
    </div>

    <h2 data-aos="fade-up">Form Pendaftaran</h2>
    <p data-aos="fade-up" data-aos-delay="80">Isi data berikut untuk mendaftar ke kelas pilates kami.</p>

    <form id="form" data-aos="fade-up" data-aos-delay="160" novalidate>
      <!-- Nama -->
      <div class="field">
        <label for="nama">Nama Lengkap *</label>
        <input id="nama" name="nama" type="text" required placeholder="Nama Anda" aria-required="true">
      </div>

      <!-- Email & Telepon -->
      <div class="row">
        <div class="field">
          <label for="email">Email *</label>
          <input id="email" name="email" type="email" required placeholder="contoh@domain.com" aria-required="true">
        </div>
        <div class="field">
          <label for="telp">No. Telepon *</label>
          <!-- contoh pattern sederhana: mulai dengan 08 dan panjang min 8 -->
          <input id="telp" name="telp" type="tel" required placeholder="08xx..." pattern="^08[0-9]{6,12}$" aria-required="true">
          <small class="hint" aria-hidden="true">Contoh: 081234567890</small>
        </div>
      </div>

      <!-- Kelas -->
      <div class="field">
        <label for="kelas">Pilih Kelas *</label>
        <select id="kelas" name="kelas" required aria-required="true">
            <option value="">-- Pilih Kelas --</option>
          <option value="Kelas Pagi">Kelas Pagi</option>
          <option value="Kelas Malam">Kelas Malam</option>
          <option value="Kelas Online">Kelas Online</option>
          <option value="Instruktur Profesional">Instruktur Profesional</option>
        </select>
      </div>

      <!-- Tanggal & Waktu -->
      <div class="row">
        <div class="field">
          <label for="tgl">Tanggal Preferensi *</label>
          <input id="tgl" name="tgl" type="date" required>
        </div>
        <div class="field">
          <label for="waktu">Waktu Preferensi *</label>
          <input id="waktu" name="waktu" type="time" required>
        </div>
      </div>

      <!-- Catatan -->
      <div class="field">
        <label for="catatan">Catatan / Kebutuhan Khusus</label>
        <textarea id="catatan" name="catatan" placeholder="Mis. cedera, preferensi instruktur (opsional)"></textarea>
      </div>

      <!-- Referral -->
      <div class="field">
        <label for="ref">Darimana tahu tentang kami?</label>
        <input id="ref" name="ref" type="text" placeholder="Teman / Instagram / Lainnya (opsional)">
      </div>

      <button type="submit" class="submit" id="submitBtn">Kirim Pendaftaran</button>
      <p class="hint">* Semua kolom bertanda bintang wajib diisi.</p>
      <div id="result" role="status" aria-live="polite"></div>
    </form>
  </main>

  <footer data-aos="fade-up">
    <p>Cat Lovers &copy; 2025</p>
  </footer>

  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>
    AOS.init({ once:true, duration:900 });

    const form = document.getElementById('form');
    const result = document.getElementById('result');
    const submitBtn = document.getElementById('submitBtn');

    form.addEventListener('submit', function(e) {
      e.preventDefault();

      // HTML5 validity check
      if (!form.checkValidity()) {
        form.reportValidity();
        return;
      }

      // disable button sementara untuk mencegah submit ganda
      submitBtn.disabled = true;

      const data = {
        nama: form.nama.value.trim(),
        email: form.email.value.trim(),
        telp: form.telp.value.trim(),
        kelas: form.kelas.value,
        tanggal: form.tgl.value,
        waktu: form.waktu.value,
        catatan: form.catatan.value.trim(),
        ref: form.ref.value.trim()
      };

      // format tanggal ke format yang lebih ramah (jika valid)
      let tanggalTampil = '-';
      if (data.tanggal) {
        const dt = new Date(data.tanggal + 'T00:00:00'); // tambahkan time untuk menghindari offset
        if (!isNaN(dt)) {
          tanggalTampil = dt.toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' });
        } else {
          tanggalTampil = data.tanggal;
        }
      }

      const waktuTampil = data.waktu || '-';

      // aman: escape setiap input yang dimasukkan ke innerHTML
      result.innerHTML = '<div class="success">' +
        'Terima kasih, <strong>' + escapeHtml(data.nama || '-') + '</strong>! ' +
        'Pendaftaran Anda untuk <strong>' + escapeHtml(data.kelas || '-') + '</strong> ' +
        'pada <strong>' + escapeHtml(tanggalTampil) + ' ' + escapeHtml(waktuTampil) + '</strong> telah diterima.' +
        '</div>';

      // reset form dan fokus
      form.reset();
      form.nama.focus();

      // scroll ke atas untuk melihat pesan
      window.scrollTo({top:0,behavior:'smooth'});

      // re-enable setelah sedikit delay (simulasi selesai)
      setTimeout(() => { submitBtn.disabled = false; }, 700);
    });

    function escapeHtml(str){
      // pastikan string
      str = String(str === undefined || str === null ? '' : str);
      return str.replace(/[&<>"'`=\/]/g, function(s) {
        return '&#' + s.charCodeAt(0) + ';';
      });
    }
  </script>
</body>
</html>
